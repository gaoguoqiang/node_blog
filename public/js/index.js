window.onload=function(){var e=new Vue,t=new Vue({el:"#conter",data:{message:"",onOff:!0,loginInfo:{username:"",password:""},regInfo:{username:"",password:"",repassword:""}},methods:{onoff:function(){this.onOff=!this.onOff,this.message=""},login:function(){$.ajax({type:"post",url:"/api/user/login",data:this.loginInfo,dataType:"json",success:function(e){t.$data.message=e.message,e.code||window.location.reload()}})},reg:function(){$.ajax({type:"post",url:"/api/user/register",data:this.regInfo,success:function(e){t.$data.message=e.message,e.code||setTimeout(function(){t.$data.message="",t.$data.onOff=!t.$data.onOff},1e3)}})},logout:function(){$.ajax({type:"get",url:"/api/user/logout",success:function(e){e.code||window.location.reload()}})}}}),a=new Vue({el:"#category",data:{name:null},methods:{getData:function(){var e=this;$.ajax({type:"post",url:"/api/category/categories",success:function(t){e.name=t.categoryName}})},show:function(t){if(t>=0)var a={id:this.name[t]._id};else var a={id:null};e.$emit("change",a)}},updated:function(){$("#category li").click(function(){$("#category li").removeClass("active"),$(this).addClass("active")})}}),n=new Vue({el:"#content",data:{content:null,page:0,pages:0,limit:0,count:0,categoryId:null},methods:{getData:function(e){var t=this,a="";e?(e.page&&!e.id&&(a="/api/main/contents?page="+e.page),!e.page&&e.id&&(a="/api/main/contents?id="+e.id),e.page&&e.id&&(a="/api/main/contents?page="+e.page+"&id="+e.id),e.page||e.id||(a="/api/main/contents")):a="/api/main/contents",$.ajax({type:"post",url:a,success:function(e){t.content=e.contents,t.page=e.page,t.pages=e.pages,t.limit=e.limit,t.count=e.count}})},newTime:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),i=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),g=a+"年"+n+"月"+o+"日 "+i+":"+s+":"+c;return g}},created:function(){var t=this;e.$on("change",function(e){t.categoryId=e.id,t.getData(e)})}});n.getData(),a.getData()};