window.onload=function(){var e=new Vue,t=new Vue({el:"#conter",data:{message:"",onOff:!0,loginInfo:{username:"",password:""},regInfo:{username:"",password:"",repassword:""}},methods:{onoff:function(){this.onOff=!this.onOff,this.message=""},login:function(){$.ajax({type:"post",url:"/api/user/login",data:this.loginInfo,dataType:"json",success:function(e){t.$data.message=e.message,e.code||window.location.reload()}})},reg:function(){$.ajax({type:"post",url:"/api/user/register",data:this.regInfo,success:function(e){t.$data.message=e.message,e.code||setTimeout(function(){t.$data.message="",t.$data.onOff=!t.$data.onOff},1e3)}})},logout:function(){$.ajax({type:"get",url:"/api/user/logout",success:function(e){e.code||window.location.reload()}})}}}),n=new Vue({el:"#category",data:{name:null},methods:{getData:function(){var e=this;$.ajax({type:"post",url:"/api/category/categories",success:function(t){e.name=t.categoryName}})},show:function(t){if(t>=0)var n={id:this.name[t]._id};else var n={id:null};e.$emit("change",n)}},updated:function(){$("#category li").click(function(){$("#category li").removeClass("active"),$(this).addClass("active")})}}),a=new Vue({el:"#content",data:{content:null,page:0,pages:0,limit:0,count:0,categoryId:null,onOff:!0},methods:{getData:function(e){var t=this,n="";e?(e.page&&!e.id&&(n="/api/main/contents?page="+e.page),!e.page&&e.id&&(n="/api/main/contents?id="+e.id),e.page&&e.id&&(n="/api/main/contents?page="+e.page+"&id="+e.id),e.page||e.id||(n="/api/main/contents")):n="/api/main/contents",$.ajax({type:"post",url:n,success:function(e){t.content=e.contents,t.page=e.page,t.pages=e.pages,t.limit=e.limit,t.count=e.count}})},newTime:function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),i=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),u=n+"年"+a+"月"+o+"日 "+i+":"+s+":"+c;return u},jump:function(t){console.log(t),this.onOff=!1,e.$emit("showParticular",t)}},created:function(){var t=this;e.$on("change",function(e){t.categoryId=e.id,t.getData(e),t.onOff=!0})}});new Vue({el:"#particular",data:{onOff:!1,content:null},methods:{getData:function(e){var t=this;$.ajax({type:"post",url:"/api/main/particular",data:{id:e},success:function(e){t.content=e.content}})},newTime:function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),i=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),u=n+"年"+a+"月"+o+"日 "+i+":"+s+":"+c;return u}},beforeCreate:function(){var t=this;e.$on("showParticular",function(e){t.onOff=!0,t.getData(e)}),e.$on("change",function(e){t.onOff=!1})}});a.getData(),n.getData()};